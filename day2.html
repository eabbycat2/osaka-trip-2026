<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Osaka Journey | Day 2</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* 極致明亮色票 (同 Day 1) */
            --bg: #FCFCFA;          
            --card-bg: #FFFFFF;
            --primary: #5A6A58;     
            --secondary: #8C9488;   
            --text-main: #2F3337;   
            --text-light: #888888;
            --border: #F0F0F0;
            --btn-bg: #F5F5F0;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; font-family: -apple-system, "Noto Serif TC", serif;
            background: var(--bg); color: var(--text-main); 
            padding-bottom: 110px; line-height: 1.75;
            -webkit-tap-highlight-color: transparent;
        }

        /* Hero */
        .hero { padding: 50px 25px 20px; background: var(--bg); }
        .hero-date { font-family: sans-serif; letter-spacing: 2px; font-size: 13px; color: var(--secondary); font-weight: 600; margin-bottom: 10px; text-transform: uppercase; }
        .hero-title { font-size: 40px; font-weight: 700; margin: 0 0 15px 0; color: var(--text-main); letter-spacing: -1px; line-height: 1.2; }
        .hero-desc { font-size: 15px; color: var(--text-light); font-family: sans-serif; max-width: 90%; line-height: 1.6; }

        /* Weather */
        .weather-scroller { display: flex; overflow-x: auto; gap: 12px; padding: 10px 25px 30px; scrollbar-width: none; }
        .weather-scroller::-webkit-scrollbar { display: none; }
        .weather-hour { flex: 0 0 auto; text-align: center; font-family: sans-serif; background: white; padding: 12px 0; border-radius: 50px; border: 1px solid var(--border); width: 60px; }
        .wh-time { font-size: 11px; color: #999; margin-bottom: 4px; }
        .wh-temp { font-size: 14px; font-weight: 700; color: var(--text-main); }
        .wh-icon { color: var(--secondary); margin-bottom: 4px; font-size: 14px; }
        .wh-loading { font-size: 12px; color: #BBB; padding: 0 25px; }

        /* Card */
        .card { background: var(--card-bg); margin: 0 20px 20px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }
        .card-header { padding: 20px 25px 15px; display: flex; align-items: center; justify-content: space-between; }
        .location-title { font-size: 18px; font-weight: 700; color: var(--text-main); display: flex; align-items: center; gap: 10px; }
        .location-title i { color: var(--secondary); font-size: 16px; opacity: 0.8; }
        .card-body { padding: 0 25px 25px; }

        /* Timeline */
        .time-row { display: flex; gap: 20px; padding: 15px 0; border-bottom: 1px solid var(--border); }
        .time-row:last-child { border-bottom: none; }
        .time-col { font-family: sans-serif; font-size: 13px; font-weight: 500; color: var(--secondary); min-width: 45px; padding-top: 3px; }
        .content-col { flex: 1; }
        .event-title { font-size: 16px; font-weight: 700; color: var(--text-main); margin-bottom: 6px; }
        .event-desc { font-size: 14px; color: #666; line-height: 1.7; margin-top: 5px; }
        .event-desc ul { margin: 0; padding-left: 18px; }
        .event-desc li { margin-bottom: 4px; }

        /* Accordion List */
        .expand-item { padding: 18px 0; border-bottom: 1px solid var(--border); }
        .expand-item:last-child { border-bottom: none; }
        .expand-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .item-name { font-size: 16px; font-weight: 600; color: var(--text-main); display: flex; align-items: center; gap: 10px; }
        .tag { font-size: 10px; padding: 3px 10px; border-radius: 20px; font-family: sans-serif; letter-spacing: 0.5px; border: 1px solid #EEE; }
        .tag-shop { color: #888; }
        .tag-special { background: var(--primary); color: white; border-color: var(--primary); }
        .expand-content { display: none; margin-top: 15px; padding-top: 5px; animation: fadeIn 0.3s; }
        .expand-item.active .expand-content { display: block; }
        .expand-item.active .fa-chevron-down { transform: rotate(180deg); transition: 0.3s; opacity: 0.5; }

        /* Guide & Meta */
        .guide-text { font-size: 14px; color: #555; line-height: 1.8; padding: 0 5px; border-left: 2px solid var(--primary); padding-left: 15px; margin: 10px 0 15px; }
        .shop-meta { font-size: 12px; color: #999; margin-bottom: 10px; font-family: sans-serif; display: flex; gap: 12px; align-items: center; }

        /* Buttons */
        .btn-outline { display: inline-flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin-top: 15px; border: 1px solid #DDD; color: var(--text-main); border-radius: 50px; text-decoration: none; font-size: 13px; font-weight: 500; transition: all 0.2s; font-family: sans-serif; background: #fff; }
        .btn-outline:active { background: var(--bg); border-color: #CCC; }

        /* Map Container (Lightbox trigger) */
        .map-container { width: 100%; height: 200px; background: #eee; border-radius: 12px; display: flex; align-items: center; justify-content: center; position: relative; margin-bottom: 20px; overflow: hidden; cursor: zoom-in; }
        .map-img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
        .map-hint { position: absolute; bottom: 10px; right: 10px; background: rgba(255,255,255,0.9); padding: 4px 10px; border-radius: 20px; font-size: 11px; color: #333; pointer-events: none; }

        /* Dock */
        .dock { position: fixed; bottom: 30px; left: 30px; right: 30px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border-radius: 50px; height: 65px; display: flex; align-items: center; justify-content: space-around; z-index: 1000; box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
        .dock-item { color: #CCC; text-align: center; text-decoration: none; font-size: 10px; font-family: sans-serif; transition: 0.2s; }
        .dock-item.active { color: var(--primary); transform: translateY(-2px); }
        .dock-item i { font-size: 22px; display: block; margin-bottom: 4px; }

        /* Lightbox */
        .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); backdrop-filter: blur(5px); z-index: 3000; display: none; justify-content: center; align-items: center; flex-direction: column; opacity: 0; transition: opacity 0.3s; }
        .lightbox.active { display: flex; opacity: 1; }
        .lightbox img { max-width: 95%; max-height: 85%; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
        .lightbox-close { color: #333; font-size: 16px; margin-top: 20px; cursor: pointer; padding: 10px 20px; background: #eee; border-radius: 30px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="hero">
    <div class="hero-date">Day 2 . Jan 19</div>
    <div class="hero-title">勝運與繁華</div>
    <div class="hero-desc">早晨前往箕面山祈求勝運，午後迷失在梅田的百貨迷宮中，感受大阪最現代化的脈動。</div>
</div>

<div class="weather-scroller" id="weather-box">
    <div class="wh-loading">正在載入大阪氣象...</div>
</div>

<div class="card">
    <div class="card-header">
        <div class="location-title"><i class="fas fa-coffee"></i> 早晨時光</div>
    </div>
    <div class="card-body">
        <div class="time-row">
            <div class="time-col">08:00</div>
            <div class="content-col">
                <div class="event-title">便利商店 / 飯店早餐</div>
                <div class="event-desc">
                    建議吃飽一點，因為勝尾寺周邊餐廳較少。出發前檢查水壺與行動電源。
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <div class="location-title"><i class="fas fa-bus"></i> 前往勝尾寺</div>
    </div>
    <div class="card-body">
        <div class="time-row">
            <div class="time-col">09:00</div>
            <div class="content-col">
                <div class="event-title">地鐵 + 巴士接駁</div>
                <div class="guide-text" style="border-left: 2px solid var(--secondary);">
                    <b>Step 1: 地鐵御堂筋線</b><br>
                    從「心齋橋站」搭乘往「箕面萱野」方向列車，搭到終點站下車 (約 35 分)。<br><br>
                    <b>Step 2: 轉乘巴士</b><br>
                    出站後往公車總站，尋找 <b>29 號或 30 號巴士 (阪急巴士)</b>，在「勝尾寺」站下車。
                </div>
                <a href="https://maps.app.goo.gl/HMYUMvgcWuHHgouQA9" class="btn-outline">
                    <i class="fas fa-location-arrow"></i> 導航至箕面萱野站
                </a>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <div class="location-title"><i class="fas fa-torii-gate"></i> 勝尾寺 (勝運之寺)</div>
    </div>
    <div class="card-body">
        <div class="time-row">
            <div class="time-col">10:00</div>
            <div class="content-col">
                <div class="event-title">祈求勝運與達摩</div>
                <div class="guide-text">
                    這裡以滿山滿谷的「達摩」聞名，是祈求考試、事業成功的聖地。
                    <br><b>必做之事：</b>買一個屬於自己的達摩，畫上左眼許願，願望達成後再畫右眼。
                </div>
                <a href="https://maps.app.goo.gl/10" class="btn-outline">
                    <i class="fas fa-map-marker-alt"></i> Google 地標
                </a>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <div class="location-title"><i class="fas fa-shopping-bag"></i> 梅田百貨迷宮</div>
    </div>
    <div class="card-body">
        
        <div class="map-container" onclick="openLightbox(this.querySelector('img').src)">
            <img src="https://github.com/eabbycat2/osaka-trip-2026/blob/main/%E6%A2%85%E7%94%B0%E5%8D%80%E7%99%BE%E8%B2%A8%E6%94%BB%E7%95%A5.jpg?raw=true" class="map-img">
            <div class="map-hint"><i class="fas fa-search-plus"></i> 查看百貨攻略地圖</div>
        </div>

        <div class="time-row">
            <div class="time-col">13:30</div>
            <div class="content-col">
                <div class="event-title">梅田區域散策</div>
                <div class="event-desc">梅田被稱為「大阪迷宮」，建議善用上方地圖確認各大百貨位置。</div>
            </div>
        </div>

        <div class="expand-item" onclick="toggleItem(this)">
            <div class="expand-header">
                <div class="item-name"><span class="tag tag-special">必逛</span> 大丸梅田店</div>
                <i class="fas fa-chevron-down" style="color:#DDD"></i>
            </div>
            <div class="expand-content">
                <div class="shop-meta"><i class="far fa-clock"></i> 10:00 - 20:00</div>
                <div class="guide-text">
                    直衝 <b>13 樓</b>！這裡是「寶可夢中心」與「Nintendo Osaka」的所在地，任天堂粉絲絕對會失心瘋。
                </div>
                <a href="https://maps.app.goo.gl/zTrtuhtAHYLW1E3v60" class="btn-outline">Google 導航</a>
            </div>
        </div>

        <div class="expand-item" onclick="toggleItem(this)">
            <div class="expand-header">
                <div class="item-name"><span class="tag tag-shop">時尚</span> Grand Front Osaka</div>
                <i class="fas fa-chevron-down" style="color:#DDD"></i>
            </div>
            <div class="expand-content">
                <div class="shop-meta"><i class="far fa-clock"></i> 11:00 - 21:00</div>
                <div class="guide-text">
                    分為南館與北館，風格較為成熟知性。連結兩館的 2 樓天橋是拍攝梅田車站建築的絕佳位置。
                </div>
                <a href="https://maps.app.goo.gl/zTrtuhtAHYLW1E3v61" class="btn-outline">Google 導航</a>
            </div>
        </div>

        <div class="expand-item" onclick="toggleItem(this)">
            <div class="expand-header">
                <div class="item-name"><span class="tag tag-shop">潮流</span> LUCUA / LUCUA 1100</div>
                <i class="fas fa-chevron-down" style="color:#DDD"></i>
            </div>
            <div class="expand-content">
                <div class="shop-meta"><i class="far fa-clock"></i> 10:30 - 20:30</div>
                <div class="guide-text">
                    年輕女性服飾品牌最齊全的地方，非常好逛。B2 的美食街很有名。
                </div>
                <a href="https://maps.app.goo.gl/zTrtuhtAHYLW1E3v62" class="btn-outline">Google 導航</a>
            </div>
        </div>

        <div class="expand-item" onclick="toggleItem(this)">
            <div class="expand-header">
                <div class="item-name"><span class="tag tag-shop">地標</span> HEP FIVE</div>
                <i class="fas fa-chevron-down" style="color:#DDD"></i>
            </div>
            <div class="expand-content">
                <div class="shop-meta"><i class="far fa-clock"></i> 11:00 - 21:00</div>
                <div class="guide-text">
                    屋頂上有顯眼的紅色摩天輪。這裡主打年輕潮流與拍貼機，充滿活力。
                </div>
                <a href="https://maps.app.goo.gl/zTrtuhtAHYLW1E3v63" class="btn-outline">Google 導航</a>
            </div>
        </div>

        <div class="expand-item" onclick="toggleItem(this)">
            <div class="expand-header">
                <div class="item-name"><span class="tag tag-shop">甜點</span> 阪急百貨 梅田本店</div>
                <i class="fas fa-chevron-down" style="color:#DDD"></i>
            </div>
            <div class="expand-content">
                <div class="shop-meta"><i class="far fa-clock"></i> 10:00 - 20:00</div>
                <div class="guide-text">
                    大阪貴婦百貨的代表。B1 的甜點區是全大阪最強，想買精緻伴手禮來這裡就對了。
                </div>
                <a href="https://maps.app.goo.gl/zTrtuhtAHYLW1E3v64" class="btn-outline">Google 導航</a>
            </div>
        </div>

    </div>
</div>

<div class="card">
    <div class="card-header">
        <div class="location-title"><i class="fas fa-utensils"></i> 美食口袋名單</div>
    </div>
    <div class="card-body">
        <div class="guide-text" style="margin-top:0; border-left:none; padding-left:0; color:#666;">
            已為您整理好周邊的推薦美食，包含梅田與心齋橋區域。點擊下方按鈕直接開啟地圖探索。
        </div>
        <a href="https://maps.app.goo.gl/fXYQTt3Bd8ZoDNz97" target="_blank" class="btn-outline" style="padding: 15px; font-weight:600; background: var(--bg); border-color: #DDD;">
            <i class="fas fa-map-marked-alt"></i> 開啟 Google 美食地圖
        </a>
    </div>
</div>

<div class="dock">
    <a href="#" class="dock-item active"><i class="fas fa-compass"></i>Day 2</a>
    <a href="#" class="dock-item"><i class="fas fa-map"></i>地圖</a>
    <a href="#" class="dock-item"><i class="fas fa-wallet"></i>記帳</a>
    <a href="#" class="dock-item"><i class="fas fa-ticket-alt"></i>票券</a>
</div>

<div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="">
    <div class="lightbox-close">關閉預覽</div>
</div>

<script>
    function toggleItem(el) { el.classList.toggle('active'); }
    
    function openLightbox(src) {
        document.getElementById('lightbox-img').src = src;
        document.getElementById('lightbox').classList.add('active');
    }
    function closeLightbox() {
        document.getElementById('lightbox').classList.remove('active');
    }

    // Weather API (Same as Day 1)
    async function fetchWeather() {
        // 這裡可以改成箕面市的座標，或是維持大阪市 (差異不大)
        const url = "https://api.open-meteo.com/v1/forecast?latitude=34.69&longitude=135.50&hourly=temperature_2m,weathercode&timezone=Asia%2FTokyo&forecast_days=1";
        try {
            const response = await fetch(url);
            const data = await response.json();
            const container = document.getElementById('weather-box');
            container.innerHTML = ''; 
            
            const now = new Date();
            const currentHour = now.getHours();
            
            for(let i = currentHour; i < currentHour + 6; i++) {
                if(i >= data.hourly.time.length) break;
                const timeStr = data.hourly.time[i].substring(11, 16);
                const temp = Math.round(data.hourly.temperature_2m[i]);
                const code = data.hourly.weathercode[i];
                let icon = 'fa-sun';
                if (code > 3) icon = 'fa-cloud';
                if (code > 50) icon = 'fa-cloud-rain';
                const div = document.createElement('div');
                div.className = 'weather-hour';
                div.innerHTML = `<div class="wh-time">${timeStr}</div><i class="fas ${icon} wh-icon"></i><div class="wh-temp">${temp}°</div>`;
                container.appendChild(div);
            }
        } catch (e) {
            document.getElementById('weather-box').innerHTML = '<div class="wh-loading">無法載入氣象</div>';
        }
    }
    fetchWeather();
</script>

</body>
</html>
